{% extends "layout_patient.html" %}
{% block content %}
      <div class="row">
        <div class="col-md-6">
          <h1>Informant Information</h1>
        </div>
      </div>
      
        {% if form["informant"] is not none %}
            <!-- action url is for update -->
            <form class="formOverride" id="informantForm" action='/website/informants/{{form["informant"]["informantID"]}}/', method='post'>
        {% else %}
            <form class="formOverride" id="informantForm" action='/website/informants/', method='post'>
        {% endif %}
          <fieldset>
            <div class="form-group">
              <div class="row">
                <div class = "col-md-2">
                  <label for="text_firstName">First Name</label>
                  <input type="text" class="form-control" name="firstName" id="text_firstName" value="{{form["informant"]["firstName"]}}">
                </div>
                <div class="col-md-2">
                  <label for="text_middleName">Middle Name</label>
                  <input type="text" class="form-control" name="middleName" id="text_middleName" value="{{form["informant"]["middleName"]}}">
                </div>
                <div class="col-md-2"> 
                  <label for="text_lastName">Last Name</label>
                  <input type="text" class="form-control" name="lastName" id="text_lastName" value="{{form["informant"]["lastName"]}}">
                </div>
              </div>
              <div class="row">
                <div class = "col-md-2">
                  <label for="text_informantPrimary">Informant Primary</label>
                  <input type="text" class="form-control" name="informantPrimary" id="text_informantPrimary" value="{{form["informant"]["informantPrimary"]}}">
                </div>
                <div class = "col-md-2">
                  <label for="text_informantRelationship">Informant Relationship</label>
                  <input type="text" class="form-control" name="informantRelationship" id="text_informantRelationship" value="{{form["informant"]["informantRelationship"]}}">
                </div>
                <div class = "col-md-2">
                  <label for="text_notes">Notes</label>
                  <input type="text" class="form-control" name="notes" id="text_notes" value="{{form["informant"]["notes"]}}">
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="row">
                <div class = "col-md-2">
                  <label for="text_createdDate">Created</label>
                  <input type="text" class="form-control" name="createdDate" id="text_createdDate" value="{{form["informant"]["createdDate"]}}" readonly="readonly" disabled="disabled">
                </div>
                <div class = "col-md-2">
                  <label for="text_modifiedDate">Last Modified</label>
                  <input type="text" class="form-control" name="modifiedDate" id="text_modifiedDate" value="{{form["informant"]["modifiedDate"]}}" readonly="readonly" disabled="disabled">
                </div>
                <div class="col-md-2">
                  <label for="text_versionID">Version</label>  {% if form['informantAddress'] is not none %}
                        <input type="text" class="form-control" name="versionID" id="text_versionID" value="{{form['informant']["versionID"]}}" readonly="readonly">
                      {% else %}
                        <input type="text" class="form-control" name="versionID" id="text_versionID" value="0" readonly="readonly">
                      {% endif %}  
                </div>
                <!-- Extra hidden fields -->
                {% if form['informant'] is not none %}
                    <input type="hidden" name="_method" value="put" />
                    <input type="hidden" name="patientID" value="{{form["informant"]["patientID"]}}"/>
                {% else %}
                    <input type="hidden" name="patientID" value="{{form["patient"]["patientID"]}}"/>
                {% endif %}
            </div>
          </div>
        </fieldset>
        <fieldset>
            <div class = "form-group">
              <div class="row">
                <div class="col-md-2">
                {% if form['informant'] is not none %}
                  <button class="btn btn-primary form-control" type="submit" value="Submit">Submit Edits</button>
                {% else %}
                  <button class="btn btn-primary form-control" type="submit" value="Submit">Add Informant</button>
                {% endif %}
                </div>
              </div>
            </div>
        </fieldset>
    </form>
    
    <ul class="nav nav-tabs" role="tablist">
        <li class="active"><a href = "#informantAddressTab" role="tab" data-toggle="tab">Address</a></li>
        <li><a href = "#informantPhonesTab" role="tab" data-toggle="tab">Phone</a></li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="informantAddressTab">
            <ul class ="nav nav-tabs" role="tablist">
                {% for informantAddress in form["informantAddresses"] %}
                    {% if loop.index == 1 %}
                    <li class="active"><a href="#informantAddress{{informantAddress.informantAddressID}}Tab" role="tab" data-toggle="tab">{{informantAddress.contactInfoStatus.contactInfoStatus}} </a></li>
                    {% else %}
                    <li><a href="#informantAddress{{informantAddress.informantAddressID}}Tab" role="tab" data-toggle="tab">{{informantAddress.contactInfoStatus.contactInfoStatus}} </a></li>
                    {% endif %}
                {% endfor %}
                <li><a href="#newAddressTab" role="tab" data-toggle="tab">New Address</a></li>
            </ul>
            <div class="tab-content">
                {% for informantAddress in form["informantAddresses"] %}
                {% if loop.index == 1 %}
                <div class="tab-pane active" id="informantAddress{{informantAddress.informantAddressID}}Tab">
                {% else %}
                <div class="tab-pane" id="informantAddress{{informantAddress.informantAddressID}}Tab">
                {% endif %}
                    {% include 'helper_forms/informant_address_form.html' %}
                </div>
                {% endfor %}
                <div class="tab-pane" id="newAddressTab">
                {% set informantAddress = none %}
                {% include 'helper_forms/informant_address_form.html' %}
                </div>
            </div>
        </div>
        <div class="tab-pane" id="informantPhonesTab">
            <ul class ="nav nav-tabs" role="tablist">
                {% for informantPhone in form["informantPhones"] %}
                    {% if loop.index == 1 %}
                    <li class="active"><a href="#informantPhone{{informantPhone.informantPhoneID}}Tab" role="tab" data-toggle="tab">{{informantPhone.contactInfoStatus.contactInfoStatus}} </a></li>
                    {% else %}
                    <li><a href="#informantPhone{{informantPhone.informantPhoneID}}Tab" role="tab" data-toggle="tab">{{informantPhone.contactInfoStatus.contactInfoStatus}} </a></li>
                    {% endif %}
                {% endfor %}
                <li><a href="#newEmailTab" role="tab" data-toggle="tab">New Email</a></li>
            </ul>
            <div class="tab-content">
                {% for informantPhone in form["informantPhones"] %}
                {% if loop.index == 1 %}
                <div class="tab-pane active" id="informantPhone{{informantPhone.informantPhoneID}}Tab">
                {% else %}
                <div class="tab-pane" id="informantPhone{{informantPhone.informantPhoneID}}Tab">
                {% endif %}
                    {% include 'helper_forms/informant_phone_form.html' %}
                </div>
                {% endfor %}
                <div class="tab-pane" id="newEmailTab">
                {% set informantPhone = none %}
                {% include 'helper_forms/informant_phone_form.html' %}
                </div>
            </div>
        </div>
    </div>

{% endblock %}
